{"version":3,"sources":["webpack:///./js/services/spinner.js","webpack:///./js/main.js","webpack:///./js/services/modal-service.js","webpack:///./templates/photo-card.hbs"],"names":["spinner","document","getElementById","services_spinner","show","classList","remove","hide","add","refs","searchForm","querySelector","gallery","addEventListener","e","preventDefault","innerHTML","input","currentTarget","elements","query","infScrollInstance","InfiniteScroll","responseType","history","path","corsAnywhere","value","this","pageIndex","on","response","photosData","JSON","parse","photos","hits","markup","photoCardTemplate","proxyEl","createElement","parsedItems","querySelectorAll","appendItems","loadNextPage","targetElem","target","textContent","contains","imgURL","modalInstance","largeImgURL","closest","dataset","source","basicLightbox","onShow","instance","onClose","window","key","close","Handlebars","__webpack_require__","module","exports","template","1","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","helperMissing","alias3","alias4","escapeExpression","webformatURL","call","name","hash","largeImageURL","tags","likes","views","comments","downloads","compiler","main","stack1","each","fn","program","inverse","noop","useData"],"mappings":"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","file":"main.2ee0121069a7e9804068.js","sourcesContent":["'use strict';\r\n\r\nconst spinner = document.getElementById('spinner');\r\n\r\nexport default {\r\n  show() {\r\n    spinner.classList.remove('is-hidden');\r\n  },\r\n  hide() {\r\n    spinner.classList.add('is-hidden');\r\n  },\r\n};\r\n","'use strict';\r\n\r\n// styles\r\nimport 'material-design-icons/iconfont/material-icons.css';\r\n\r\n// HTML template\r\nimport photoCardTemplate from '../templates/photo-card.hbs';\r\n\r\n// helpers\r\nimport InfiniteScroll from 'infinite-scroll';\r\nimport openModalBtnClickHandler from './services/modal-service';\r\n\r\n// DOM elements\r\nconst refs = {\r\n  searchForm: document.querySelector('.search-form'),\r\n  gallery: document.querySelector('.gallery'),\r\n};\r\n\r\n// adding event listeners\r\nrefs.searchForm.addEventListener('submit', searchFormSubmitHandler);\r\nrefs.gallery.addEventListener('click', openModalBtnClickHandler);\r\n\r\nfunction searchFormSubmitHandler(e) {\r\n  e.preventDefault();\r\n  clearListItems();\r\n\r\n  const form = e.currentTarget;\r\n  const input = form.elements.query;\r\n\r\n  const corsAnywhere = 'https://cors-anywhere.herokuapp.com/';\r\n  const baseURL = 'https://pixabay.com/api/';\r\n  const params = '?image_type=photo&orientation=horizontal&per_page=12';\r\n  const key = '&key=12880088-5f1634c62e30865f461701c2f';\r\n\r\n  const infScrollInstance = new InfiniteScroll(refs.gallery, {\r\n    responseType: 'text',\r\n    history: false,\r\n    path() {\r\n      return (\r\n        corsAnywhere +\r\n        baseURL +\r\n        params +\r\n        key +\r\n        `&q=${input.value}` +\r\n        `&page=${this.pageIndex}`\r\n      );\r\n    },\r\n  });\r\n\r\n  infScrollInstance.pageIndex = 1;\r\n\r\n  infScrollInstance.on('load', response => {\r\n    const photosData = JSON.parse(response);\r\n    const photos = photosData.hits;\r\n    const markup = photoCardTemplate(photos);\r\n\r\n    const proxyEl = document.createElement('div');\r\n    proxyEl.innerHTML = markup;\r\n\r\n    const parsedItems = proxyEl.querySelectorAll('.gallery-item');\r\n    infScrollInstance.appendItems(parsedItems);\r\n  });\r\n\r\n  infScrollInstance.loadNextPage();\r\n}\r\n\r\nfunction clearListItems() {\r\n  refs.gallery.innerHTML = '';\r\n}\r\n","'use strict';\r\n\r\nimport 'basiclightbox/dist/basicLightbox.min.css';\r\nimport * as basicLightbox from 'basiclightbox';\r\nimport spinner from './spinner';\r\n\r\nexport default function openModalBtnClickHandler(e) {\r\n  const targetElem = e.target;\r\n\r\n  if (\r\n    targetElem.textContent !== 'zoom_out_map' &&\r\n    !targetElem.classList.contains('fullscreen-button')\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  const photoCard = targetElem.closest('.photo-card');\r\n  const img = photoCard.querySelector('img');\r\n  const largeImgURL = img.dataset.source;\r\n\r\n  openModal(largeImgURL);\r\n}\r\n\r\nfunction openModal(imgURL) {\r\n  // creating modal window instance\r\n  const modalInstance = basicLightbox.create(`<img src=${imgURL}>`, {\r\n    onShow: instance => {\r\n      spinner.show();\r\n    },\r\n    onClose: instance => {\r\n      spinner.hide();\r\n    },\r\n  });\r\n\r\n  modalInstance.show();\r\n\r\n  // adding possibility to close modal window with 'Esc' button\r\n  window.addEventListener('keydown', e => {\r\n    if (e.key !== 'Escape') {\r\n      return;\r\n    }\r\n\r\n    modalInstance.close();\r\n  });\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"gallery-item\\\">\\r\\n  <div class=\\\"photo-card\\\">\\r\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = helpers.tags || (depth0 != null ? depth0.tags : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">visibility</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">comment</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n    </div>\\r\\n\\r\\n    <!-- Кнопка для открытия модалки с большим изображением, появляется при наведении -->\\r\\n    <button type=\\\"button\\\" class=\\\"fullscreen-button\\\">\\r\\n      <i class=\\\"material-icons\\\">zoom_out_map</i>\\r\\n    </button>\\r\\n  </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}