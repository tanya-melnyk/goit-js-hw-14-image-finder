{"version":3,"sources":["webpack:///./js/services/photos-service.js","webpack:///./js/services/spinner.js","webpack:///./js/main.js","webpack:///./js/services/modal-service.js","webpack:///./templates/photo-card.hbs"],"names":["photos_service","page","query","fetchArticles","_this","this","requestParams","fetch","baseURL","then","response","json","parsedResponse","incrementPage","hits","catch","error","searchQuery","string","resetPage","spinner","document","getElementById","services_spinner","show","classList","remove","hide","add","refs","searchForm","querySelector","gallery","infScrollInstance","InfiniteScroll","path","status","fetchPhotos","apiPhotoService","photos","markup","photoCardTemplate","insertAdjacentHTML","renderPhotoCards","console","warn","addEventListener","e","preventDefault","innerHTML","input","currentTarget","elements","value","targetElem","target","textContent","contains","imgURL","modalInstance","largeImgURL","closest","dataset","source","basicLightbox","onShow","instance","onClose","window","key","close","on","Handlebars","__webpack_require__","module","exports","template","1","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","helperMissing","alias3","alias4","escapeExpression","webformatURL","call","name","hash","largeImageURL","tags","likes","views","comments","downloads","compiler","main","stack1","each","fn","program","inverse","noop","useData"],"mappings":"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","file":"main.f322b9dcc85f5a91d1d4.js","sourcesContent":["'use strict';\r\n\r\n// import axios from 'axios';\r\n\r\n// const corsAnywhere = 'https://cors-anywhere.herokuapp.com/';\r\nconst baseURL = 'https://pixabay.com/api/';\r\nconst key = '&key=12880088-5f1634c62e30865f461701c2f';\r\nconst params = '?image_type=photo&orientation=horizontal&per_page=12';\r\n\r\n// axios.defaults.baseURL = baseURL + params + key;\r\n\r\nexport default {\r\n  page: 1,\r\n  query: '',\r\n  fetchArticles() {\r\n    const requestParams = `&q=${this.query}&page=${this.page}`;\r\n\r\n    return fetch(baseURL + params + key + requestParams)\r\n      .then(response => response.json())\r\n      .then(parsedResponse => {\r\n        this.incrementPage();\r\n\r\n        return parsedResponse.hits;\r\n      })\r\n      .catch(error => {\r\n        throw error;\r\n      });\r\n\r\n    // return axios\r\n    //   .get(requestParams)\r\n    //   .then(response => {\r\n    //     this.incrementPage();\r\n\r\n    //     return response.data.hits;\r\n    //   })\r\n    //   .catch(error => {\r\n    //     throw error;\r\n    //   });\r\n  },\r\n\r\n  get searchQuery() {\r\n    return this.query;\r\n  },\r\n\r\n  set searchQuery(string) {\r\n    this.query = string;\r\n  },\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  },\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n};\r\n","'use strict';\r\n\r\nconst spinner = document.getElementById('spinner');\r\n\r\nexport default {\r\n  show() {\r\n    spinner.classList.remove('is-hidden');\r\n  },\r\n  hide() {\r\n    spinner.classList.add('is-hidden');\r\n  },\r\n};\r\n","'use strict';\r\n\r\n// styles\r\nimport 'material-design-icons/iconfont/material-icons.css';\r\n\r\n// helpers\r\nimport apiPhotoService from './services/photos-service';\r\nimport openModalBtnClickHandler from './services/modal-service';\r\nimport spinner from './services/spinner';\r\nimport InfiniteScroll from 'infinite-scroll';\r\n\r\n// HTML template\r\nimport photoCardTemplate from '../templates/photo-card.hbs';\r\n\r\n// DOM elements\r\nconst refs = {\r\n  searchForm: document.querySelector('.search-form'),\r\n  gallery: document.querySelector('.gallery'),\r\n};\r\n\r\n// initializing Infinite Scroll plugin\r\nconst infScrollInstance = new InfiniteScroll(refs.gallery, {\r\n  path: '{{#}}',\r\n  status: '.page-load-status',\r\n});\r\n\r\n\r\n// adding event listeners\r\nrefs.searchForm.addEventListener('submit', searchFormSubmitHandler);\r\nrefs.gallery.addEventListener('click', openModalBtnClickHandler);\r\n\r\nfunction searchFormSubmitHandler(e) {\r\n  e.preventDefault();\r\n  clearListItems();\r\n\r\n  const form = e.currentTarget;\r\n  const input = form.elements.query;\r\n\r\n  apiPhotoService.resetPage();\r\n  apiPhotoService.searchQuery = input.value;\r\n  fetchPhotos();\r\n\r\n  // input.value = '';\r\n}\r\n\r\ninfScrollInstance.on('load', fetchPhotos);\r\n\r\nfunction fetchPhotos() {\r\n  spinner.show();\r\n\r\n  apiPhotoService\r\n    .fetchArticles()\r\n    .then(photos => {\r\n      spinner.hide();\r\n      renderPhotoCards(photos);\r\n    })\r\n    .catch(error => {\r\n      console.warn(error);\r\n    });\r\n}\r\n\r\nfunction renderPhotoCards(photos) {\r\n  const markup = photoCardTemplate(photos);\r\n\r\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\r\n}\r\n\r\nfunction clearListItems() {\r\n  refs.gallery.innerHTML = '';\r\n}\r\n","'use strict';\r\n\r\nimport 'basiclightbox/dist/basicLightbox.min.css';\r\nimport * as basicLightbox from 'basiclightbox';\r\nimport spinner from './spinner';\r\n\r\nexport default function openModalBtnClickHandler(e) {\r\n  const targetElem = e.target;\r\n\r\n  if (\r\n    targetElem.textContent !== 'zoom_out_map' &&\r\n    !targetElem.classList.contains('fullscreen-button')\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  const photoCard = targetElem.closest('.photo-card');\r\n  const img = photoCard.querySelector('img');\r\n  const largeImgURL = img.dataset.source;\r\n\r\n  openModal(largeImgURL);\r\n}\r\n\r\nfunction openModal(imgURL) {\r\n  // creating modal window instance\r\n  const modalInstance = basicLightbox.create(`<img src=${imgURL}>`, {\r\n    onShow: instance => {\r\n      spinner.show();\r\n    },\r\n    onClose: instance => {\r\n      spinner.hide();\r\n    },\r\n  });\r\n\r\n  modalInstance.show();\r\n\r\n  // adding possibility to close modal window with 'Esc' button\r\n  window.addEventListener('keydown', e => {\r\n    if (e.key !== 'Escape') {\r\n      return;\r\n    }\r\n\r\n    modalInstance.close();\r\n  });\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"gallery-item\\\">\\r\\n  <div class=\\\"photo-card\\\">\\r\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = helpers.tags || (depth0 != null ? depth0.tags : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">visibility</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">comment</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n    </div>\\r\\n\\r\\n    <!-- Кнопка для открытия модалки с большим изображением, появляется при наведении -->\\r\\n    <button type=\\\"button\\\" class=\\\"fullscreen-button\\\">\\r\\n      <i class=\\\"material-icons\\\">zoom_out_map</i>\\r\\n    </button>\\r\\n  </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}